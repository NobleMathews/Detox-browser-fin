'use strict';(function(){var d={imagePaths:{active:{128:"images/a128.png",16:"images/a16.png",32:"images/a32.png",48:"images/a48.png"},inactive:{16:"images/icon16.png",32:"images/icon32.png",48:"images/icon48.png",128:"images/icon128.png"}},setTabCount:function(a,b,c){this[a]=this[a]?this[a]:{};this[a][b]=c||""},getTabCount:function(a,b){return this[a]?this[a][b]||"":""},clearTab:function(a,b){this[a]&&delete this[a][b]},setBadge(a,b,c){c=c||this.getTabCount(a,b);this.setTabCount(a,b,c);chrome.browserAction.setBadgeText({text:c})}};
chrome.runtime.onInstalled.addListener(function(){chrome.storage.local.get(["blurOption","abusingOption","hoveringOption"],function(a){a=Object.assign({blurOption:!0,hoveringOption:!0,abusingOption:!0},a.options);chrome.storage.local.set({options:a})})});chrome.runtime.onMessage.addListener(function(a,b,c){var e=b.tab.id;b=b.tab.windowId;"get_tId_and_wId"===a.event?c({tId:e,wId:e}):(chrome.browserAction.setIcon({path:d.imagePaths[a.event],tabId:e}),"inactive"===a.event?chrome.browserAction.setBadgeText({text:""}):
"active"===a.event&&d.setBadge(b,e,a.count.toString()))});chrome.tabs.onActivated.addListener(function(a){d.setBadge(a.windowId,a.tabId)});chrome.tabs.onRemoved.addListener(function(a){d.clearTab(a.windowId,a.id)});chrome.tabs.onUpdated.addListener(function(a,b,c){b.url&&chrome.tabs.sendMessage(a,{greeting:"urlChange"})})})();
